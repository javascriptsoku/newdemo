define("js/vm/list/list",function(r,t,i){var e=r("js/util/util");r("js/filter/filter");var s=Vue.extend({template:'<section class="list">\r\n	<ul class="types clearfix">\r\n		<li v-for="ickt in types" v-on:click="sortBy(ickt.key)">\r\n			<span>{{ickt.value}}</span>\r\n			<span class="arrow"></span>\r\n		</li>\r\n	</ul>\r\n	<ul class="list-container">\r\n		<!-- <li v-for="item in list | filterBy query"> -->\r\n		<!-- <li v-for="item in list | filterBy searchquery"> -->\r\n		<li v-for="item in dealList">\r\n			<a v-bind:href="\'#detail/\' + item.id">\r\n				<img v-bind:src="\'img/list/\' + item.img" alt="">\r\n				<div class="content">\r\n					<h3 v-if="hashquery[1] == 1">{{item.title}}</h3>\r\n					<p>\r\n						<span class="price">{{item.price | price}}</span>\r\n						<span class="origin-price">{{item.orignPrice | orignPrice}}</span>\r\n						<span class="sales">{{item.sales | sales}}</span>\r\n					</p>\r\n				</div>\r\n			</a>\r\n		</li>\r\n	</ul>\r\n	<div class="load-more" v-show="others.length" v-on:click="loadMore">\r\n		<span>查看剩余{{others.length}}条团购</span>\r\n		<span class="arrow">\r\n			<span class="arrow white"></span>\r\n		</span>\r\n	</div>\r\n</section>',props:["searchquery","hashquery"],data:function(){return{types:[{value:"价格排序",key:"price"},{value:"销量排序",key:"sales"},{value:"好评排序",key:"evaluate"},{value:"优惠排序",key:"discount"}],list:[],others:[],query:""}},computed:{dealList:function(){var r=this;return this.list.filter(function(t){return t.title.indexOf(r.searchquery)>=0})}},methods:{loadMore:function(){this.list=this.list.concat(this.others),this.others=[]},sortBy:function(r){this.list.sort("discount"===r?function(r,t){return t.orignPrice-t.price-(r.orignPrice-r.price)}:function(t,i){return i[r]-t[r]})}},created:function(){this.$parent.showSearch=!0,this.query=this.$parent.query[1];var r=this,t="data/list.json?"+this.$parent.query[0]+"="+this.$parent.query[1];e.ajax(t,function(t){t&&0===t.errno&&(r.list=t.data.slice(0,3),r.others=t.data.slice(3))}),this.$watch("hashquery",function(){var t="data/list.json?"+r.$parent.query[0]+"="+r.$parent.query[1];e.ajax(t,function(t){t&&0===t.errno&&(r.list=t.data.slice(0,3),r.others=t.data.slice(3))})})}});Vue.component("list",s),i.exports=s});